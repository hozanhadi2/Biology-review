<!doctype html>
<html lang="ar" dir="rtl" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ูุฑุงุฌุนุฉ ุฃุญูุงุก ุฃูู ุซุงููู</title>
  <script src="/_sdk/element_sdk.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
        body {
            box-sizing: border-box;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        .flashcard {
            perspective: 1000px;
            cursor: pointer;
        }

        .flashcard-inner {
            position: relative;
            width: 100%;
            height: 100%;
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }

        .flashcard.flipped .flashcard-inner {
            transform: rotateY(180deg);
        }

        .flashcard-front, .flashcard-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 24px;
            text-align: center;
        }

        .flashcard-back {
            transform: rotateY(180deg);
        }

        .chapter-card {
            transition: all 0.3s ease;
        }

        .chapter-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 24px rgba(0,0,0,0.15);
        }

        .quiz-option {
            transition: all 0.2s ease;
        }

        .quiz-option:hover {
            transform: scale(1.02);
        }

        .quiz-option.correct {
            animation: correctPulse 0.5s ease;
        }

        .quiz-option.wrong {
            animation: wrongShake 0.5s ease;
        }

        @keyframes correctPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        @keyframes wrongShake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-10px); }
            75% { transform: translateX(10px); }
        }

        .fade-in {
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
 </head>
 <body class="h-full">
  <div id="app" class="w-full h-full overflow-auto"></div>
  <script>
        const defaultConfig = {
            app_title: "ูุฑุงุฌุนุฉ ุฃุญูุงุก ุฃูู ุซุงููู",
            app_subtitle: "ุงููุตู ุงูุฏุฑุงุณู ุงูุฃูู",
            primary_color: "#10b981",
            secondary_color: "#ffffff",
            text_color: "#1f2937",
            accent_color: "#3b82f6",
            surface_color: "#f3f4f6",
            font_family: "system-ui",
            font_size: 16
        };

        const chapters = [
            {
                id: 1,
                title: "ุฏุฑุงุณุฉ ุงูุญูุงุฉ",
                icon: "๐ฌ",
                topics: ["ูุฏุฎู ุฅูู ุนูู ุงูุฃุญูุงุก", "ุทุจูุนุฉ ุงูุนูู ูุทุฑุงุฆูู"],
                flashcards: [
                    { front: "ูุง ูู ุนูู ุงูุฃุญูุงุกุ", back: "ุงูุนูู ุงูุฐู ูุฏุฑุณ ุงููุงุฆูุงุช ุงูุญูุฉ ูุชูุงุนูุงุชูุง ูุน ุจุนุถูุง ููุน ุงูุจูุฆุฉ" },
                    { front: "ูุง ูู ุงูุทุฑููุฉ ุงูุนูููุฉุ", back: "ูููุฌ ููุธู ูุญู ุงููุดููุงุช ูุชุถูู ุงูููุงุญุธุฉุ ุงููุฑุถูุฉุ ุงูุชุฌุฑุจุฉุ ูุงูุงุณุชูุชุงุฌ" },
                    { front: "ูุง ูู ุงููุฑุถูุฉุ", back: "ุชูุณูุฑ ูุญุชูู ูุงุจู ููุงุฎุชุจุงุฑ ูุนุชูุฏ ุนูู ุงูููุงุญุธุฉ ูุงููุนุฑูุฉ ุงูุณุงุจูุฉ" }
                ],
                quiz: [
                    {
                        question: "ุฃูู ุฎุทูุฉ ูู ุงูุทุฑููุฉ ุงูุนูููุฉ ูู:",
                        options: ["ุงูููุงุญุธุฉ", "ุงููุฑุถูุฉ", "ุงูุชุฌุฑุจุฉ", "ุงููุชูุฌุฉ"],
                        correct: 0
                    }
                ]
            },
            {
                id: 2,
                title: "ุชูุธูู ุชููุน ุงูุญูุงุฉ",
                icon: "๐ฟ",
                topics: ["ุฎุตุงุฆุต ุงูุญูุงุฉ", "ูุณุชููุงุช ุงูุชูุธูู", "ุงูุชุณููุฉ ูุงูุชุตููู"],
                flashcards: [
                    { front: "ูุง ูู ุฎุตุงุฆุต ุงูุญูุงุฉ ุงูุฃุณุงุณูุฉุ", back: "ุงูุชูุธููุ ุงููููุ ุงูุชูุงุซุฑุ ุงูุงุณุชุฌุงุจุฉ ูููุคุซุฑุงุชุ ุงูุญุงุฌุฉ ููุทุงูุฉุ ูุงูุชููู" },
                    { front: "ูุง ูู ุงูุชุตูููุ", back: "ุนูู ุชุณููุฉ ูุชูุณูู ุงููุงุฆูุงุช ุงูุญูุฉ ุฅูู ูุฌููุนุงุช ุจูุงุกู ุนูู ุฎุตุงุฆุตูุง ุงููุดุชุฑูุฉ" },
                    { front: "ูู ูุงุถุน ูุธุงู ุงูุชุณููุฉ ุงูุซูุงุฆูุฉุ", back: "ุงูุนุงูู ูุงุฑููุณ ูููููุณ" },
                    { front: "ูุง ูู ูุณุชููุงุช ุงูุชุตูููุ", back: "ุงูููููุฉุ ุงูุดุนุจุฉุ ุงูุทุงุฆูุฉุ ุงูุฑุชุจุฉุ ุงููุตููุฉุ ุงูุฌูุณุ ุงูููุน" }
                ],
                quiz: [
                    {
                        question: "ุฃุตุบุฑ ูุญุฏุฉ ูู ุงูุชุตููู ูู:",
                        options: ["ุงูุฌูุณ", "ุงูููุน", "ุงููุตููุฉ", "ุงูููููุฉ"],
                        correct: 1
                    }
                ]
            },
            {
                id: 3,
                title: "ุงูุจูุชูุฑูุง ูุงูููุฑูุณุงุช",
                icon: "๐ฆ",
                topics: ["ุฎุตุงุฆุต ุงูุจูุชูุฑูุง", "ุงูููุฑูุณุงุช", "ุงูุจุฑูููุงุช"],
                flashcards: [
                    { front: "ูุง ูู ุงูุจูุชูุฑูุงุ", back: "ูุงุฆูุงุช ุญูุฉ ุฏูููุฉ ูุญูุฏุฉ ุงูุฎููุฉ ุจุฏุงุฆูุฉ ุงูููุงุฉ" },
                    { front: "ูุง ูู ุงูููุฑูุณุงุชุ", back: "ุฌุณููุงุช ุฏูููุฉ ุบูุฑ ุญูุฉ ุชุชููู ูู ูุงุฏุฉ ูุฑุงุซูุฉ ูุญุงุทุฉ ุจุบูุงู ุจุฑูุชููู" },
                    { front: "ููู ุชุชูุงุซุฑ ุงูููุฑูุณุงุชุ", back: "ุชุชูุงุซุฑ ุฏุงุฎู ุฎูุงูุง ุงููุงุฆูุงุช ุงูุญูุฉ ููุท" },
                    { front: "ูุง ูู ุงูุจุฑูููุงุชุ", back: "ุจุฑูุชููุงุช ูุนุฏูุฉ ุบูุฑ ุทุจูุนูุฉ ุชุณุจุจ ุฃูุฑุงุถุงู ุนุตุจูุฉ" }
                ],
                quiz: [
                    {
                        question: "ุงูุจูุชูุฑูุง ุฎูุงูุง:",
                        options: ["ุจุฏุงุฆูุฉ ุงูููุงุฉ", "ุญููููุฉ ุงูููุงุฉ", "ุจูุง ููุงุฉ", "ูุชุนุฏุฏุฉ ุงูููู"],
                        correct: 0
                    }
                ]
            },
            {
                id: 4,
                title: "ุงูุทูุงุฆุนูุงุช",
                icon: "๐ฆ",
                topics: ["ูุฏุฎู ููุทูุงุฆุนูุงุช", "ุชููุน ุงูุทูุงุฆุนูุงุช", "ุฃูุซูุฉ ุนูู ุงูุทูุงุฆุนูุงุช"],
                flashcards: [
                    { front: "ูุง ูู ุงูุทูุงุฆุนูุงุชุ", back: "ูุงุฆูุงุช ุญููููุฉ ุงูููุงุฉ ูุนุธููุง ูุญูุฏ ุงูุฎููุฉุ ูุง ุชูุชูู ูููุจุงุชุงุช ุฃู ุงูุญููุงูุงุช ุฃู ุงููุทุฑูุงุช" },
                    { front: "ูุง ูู ุงูุทุญุงูุจุ", back: "ุทูุงุฆุนูุงุช ุฐุงุชูุฉ ุงูุชุบุฐูุฉ ุชุญุชูู ุนูู ุงููููุฑูููู ูุชููู ุจุงูุจูุงุก ุงูุถูุฆู" },
                    { front: "ูุง ูู ุงูุฃูููุงุชุ", back: "ุทูุงุฆุนูุงุช ุบูุฑูุฉ ุงูุชุบุฐูุฉ ุดุจููุฉ ุจุงูุญููุงูุงุช" },
                    { front: "ูุซุงู ุนูู ุงูุทูุงุฆุนูุงุช ุงูุดุจููุฉ ุจุงููุทุฑูุงุชุ", back: "ุงููุทุฑูุงุช ุงููุงุฆูุฉ ูุงููุทุฑูุงุช ุงูุบุฑููุฉ" }
                ],
                quiz: [
                    {
                        question: "ุงูุทูุงุฆุนูุงุช ุฎูุงูุง:",
                        options: ["ุจุฏุงุฆูุฉ ุงูููุงุฉ", "ุญููููุฉ ุงูููุงุฉ", "ุจูุง ููุงุฉ", "ููุฑูุณูุฉ"],
                        correct: 1
                    }
                ]
            },
            {
                id: 5,
                title: "ุงููุทุฑูุงุช",
                icon: "๐",
                topics: ["ูุฏุฎู ูููุทุฑูุงุช", "ุชููุน ุงููุทุฑูุงุช", "ุงูุญุตูู ุนูู ุงูุบุฐุงุก"],
                flashcards: [
                    { front: "ูุง ูู ุงููุทุฑูุงุชุ", back: "ูุงุฆูุงุช ุญููููุฉ ุงูููุงุฉ ุบูุฑูุฉ ุงูุชุบุฐูุฉ ููุง ุฌุฏุงุฑ ุฎููู ูู ุงููุงูุชูู" },
                    { front: "ููู ุชุญุตู ุงููุทุฑูุงุช ุนูู ุบุฐุงุฆูุงุ", back: "ุจุฅูุฑุงุฒ ุฅูุฒููุงุช ูุงุถูุฉ ุนูู ุงููุงุฏุฉ ุงูุนุถููุฉ ุซู ุงูุชุตุงุต ุงูุบุฐุงุก ุงูููุถูู" },
                    { front: "ูุง ูู ุงูุฎููุท ุงููุทุฑูุฉุ", back: "ุชุฑุงููุจ ุฎูุทูุฉ ุชุดูู ุฌุณู ุงููุทุฑ ูุชุณูู ุงููููุงุช" },
                    { front: "ุฃููุงุน ุงูุชุบุฐูุฉ ูู ุงููุทุฑูุงุชุ", back: "ุฑููุฉ (ุนูู ุงูููุงุฏ ุงูููุชุฉ)ุ ุชุทูููุฉ (ุนูู ูุงุฆูุงุช ุญูุฉ)ุ ุชูุงูููุฉ (ุชุนุงูุด)" }
                ],
                quiz: [
                    {
                        question: "ุฌุฏุงุฑ ุงูุฎููุฉ ูู ุงููุทุฑูุงุช ูุชููู ูู:",
                        options: ["ุงูุณููููุฒ", "ุงููุงูุชูู", "ุงูุจุฑูุชูู", "ุงูุฏููู"],
                        correct: 1
                    }
                ]
            },
            {
                id: 6,
                title: "ูุฏุฎู ุฅูู ุงูุญููุงูุงุช",
                icon: "๐",
                topics: ["ุฎุตุงุฆุต ุงูุญููุงูุงุช", "ูุณุชููุงุช ุจูุงุก ุงูุฌุณู", "ุงูุฅุณููุฌูุงุช ูุงููุงุณุนุงุช"],
                flashcards: [
                    { front: "ูุง ูู ุฎุตุงุฆุต ุงูุญููุงูุงุชุ", back: "ุนุฏูุฏุฉ ุงูุฎูุงูุงุ ุญููููุฉ ุงูููุงุฉุ ุบูุฑูุฉ ุงูุชุบุฐูุฉุ ูุงุฏุฑุฉ ุนูู ุงูุญุฑูุฉ" },
                    { front: "ูุง ูู ุงูุฅุณููุฌูุงุชุ", back: "ุญููุงูุงุช ุจุณูุทุฉ ุนุฏููุฉ ุงูุชูุงุซู ุชุนูุด ูู ุงููุงุก ูุชุชุบุฐู ุจุงูุชุฑุดูุญ" },
                    { front: "ูุง ูู ุงููุงุณุนุงุชุ", back: "ุญููุงูุงุช ุฐุงุช ุชูุงุซู ุดุนุงุนู ููุง ุฎูุงูุง ูุงุณุนุฉ ูุซู ููุฏูู ุงูุจุญุฑ ูุงููุฑุฌุงู" },
                    { front: "ูุง ูู ูุณุชููุงุช ุงูุชูุธูู ูู ุงูุญููุงูุงุชุ", back: "ุฎูููุ ูุณูุฌูุ ุนุถููุ ุฌูุงุฒู" }
                ],
                quiz: [
                    {
                        question: "ุงูุฅุณููุฌูุงุช ุญููุงูุงุช:",
                        options: ["ุนุฏููุฉ ุงูุชูุงุซู", "ุดุนุงุนูุฉ ุงูุชูุงุซู", "ุฌุงูุจูุฉ ุงูุชูุงุซู", "ูุฑููุฉ"],
                        correct: 0
                    }
                ]
            },
            {
                id: 7,
                title: "ุงูุฏูุฏุงู ูุงูุฑุฎููุงุช",
                icon: "๐",
                topics: ["ุงูุฏูุฏุงู ุงููููุทุญุฉ", "ุงูุฏูุฏุงู ุงูุฃุณุทูุงููุฉ", "ุงูุฑุฎููุงุช", "ุงูุฏูุฏุงู ุงูุญูููุฉ"],
                flashcards: [
                    { front: "ูุง ูู ุงูุฏูุฏุงู ุงููููุทุญุฉุ", back: "ุฏูุฏุงู ุฌุณููุง ูููุทุญุ ุจุนุถูุง ุญุฑ ูุจุนุถูุง ูุชุทูู ูุซู ุงูุฏูุฏุฉ ุงูุดุฑูุทูุฉ" },
                    { front: "ูุง ูู ุงูุฏูุฏุงู ุงูุฃุณุทูุงููุฉุ", back: "ุฏูุฏุงู ุฃุณุทูุงููุฉ ุงูุดูู ููุง ุชุฌููู ุฌุณูู ูุงุฐุจ ูุซู ุงูุฅุณูุงุฑุณ" },
                    { front: "ูุง ูู ุงูุฑุฎููุงุชุ", back: "ุญููุงูุงุช ููุง ุฌุณู ุฑุฎู ูุฃุบูุจูุง ูู ุตุฏูุฉ ูุซู ุงูุญูุฒูู ูุงูุฃุฎุทุจูุท" },
                    { front: "ูุง ูู ุงูุฏูุฏุงู ุงูุญูููุฉุ", back: "ุฏูุฏุงู ุฌุณููุง ููุณู ุฅูู ุญููุงุช ููุง ุชุฌููู ุฌุณูู ุญูููู ูุซู ุฏูุฏุฉ ุงูุฃุฑุถ" }
                ],
                quiz: [
                    {
                        question: "ุฏูุฏุฉ ุงูุฃุฑุถ ูู:",
                        options: ["ุงูุฏูุฏุงู ุงููููุทุญุฉ", "ุงูุฏูุฏุงู ุงูุฃุณุทูุงููุฉ", "ุงูุฏูุฏุงู ุงูุญูููุฉ", "ุงูุฑุฎููุงุช"],
                        correct: 2
                    }
                ]
            },
            {
                id: 8,
                title: "ุงูููุตููุงุช",
                icon: "๐ฆ",
                topics: ["ุฎุตุงุฆุต ุงูููุตููุงุช", "ุชููุน ุงูููุตููุงุช", "ุงูุญุดุฑุงุช"],
                flashcards: [
                    { front: "ูุง ูู ุงูููุตููุงุชุ", back: "ุฃูุจุฑ ุดุนุจ ุงูุญููุงูุงุชุ ููุง ูููู ุฎุงุฑุฌู ูุฒูุงุฆุฏ ููุตููุฉ" },
                    { front: "ูุง ูู ุงููููู ุงูุฎุงุฑุฌูุ", back: "ุบุทุงุก ุตูุจ ูุญูู ุงูุฌุณู ููููุน ููุฏุงู ุงููุงุก ููุชููู ูู ุงููุงูุชูู" },
                    { front: "ูุง ูู ุทูุงุฆู ุงูููุตููุงุชุ", back: "ุงููุดุฑูุงุชุ ุงูุนููุจูุงุชุ ุนุฏูุฏุฉ ุงูุฃุฑุฌูุ ุงูุญุดุฑุงุช" },
                    { front: "ุฎุตุงุฆุต ุงูุญุดุฑุงุชุ", back: "ุฌุณููุง ููุณู ูุซูุงุซุฉ ุฃุฌุฒุงุกุ ููุง 6 ุฃุฑุฌู ูุฒูุฌ ุฃู ุฒูุฌุงู ูู ุงูุฃุฌูุญุฉ" },
                    { front: "ูุง ูู ุงูุงูุณูุงุฎุ", back: "ุนูููุฉ ุชุฎูุต ุงูููุตููุงุช ูู ุงููููู ุงูุฎุงุฑุฌู ุงููุฏูู ูุชููู" }
                ],
                quiz: [
                    {
                        question: "ุนุฏุฏ ุฃุฑุฌู ุงูุญุดุฑุงุช:",
                        options: ["4", "6", "8", "10"],
                        correct: 1
                    }
                ]
            }
        ];

        let currentView = 'home';
        let currentChapter = null;
        let currentFlashcardIndex = 0;
        let currentQuizIndex = 0;
        let quizScore = 0;

        async function onConfigChange(config) {
            const baseSize = config.font_size || defaultConfig.font_size;
            const customFont = config.font_family || defaultConfig.font_family;
            const baseFontStack = 'system-ui, -apple-system, sans-serif';
            
            document.body.style.fontFamily = `${customFont}, ${baseFontStack}`;
            document.body.style.fontSize = `${baseSize}px`;
            document.body.style.background = config.surface_color || defaultConfig.surface_color;
            
            render();
        }

        function render() {
            const config = window.elementSdk ? window.elementSdk.config : defaultConfig;
            const app = document.getElementById('app');
            
            if (currentView === 'home') {
                app.innerHTML = renderHome(config);
            } else if (currentView === 'flashcards') {
                app.innerHTML = renderFlashcards(config);
            } else if (currentView === 'quiz') {
                app.innerHTML = renderQuiz(config);
            }
            
            attachEventListeners();
        }

        function renderHome(config) {
            const baseSize = config.font_size || defaultConfig.font_size;
            const primaryColor = config.primary_color || defaultConfig.primary_color;
            const secondaryColor = config.secondary_color || defaultConfig.secondary_color;
            const textColor = config.text_color || defaultConfig.text_color;
            const accentColor = config.accent_color || defaultConfig.accent_color;
            const title = config.app_title || defaultConfig.app_title;
            const subtitle = config.app_subtitle || defaultConfig.app_subtitle;
            
            return `
                <div class="w-full" style="min-height: 100%; background: linear-gradient(135deg, ${primaryColor}15 0%, ${accentColor}15 100%); padding: 32px 16px;">
                    <header class="text-center fade-in" style="margin-bottom: 48px;">
                        <h1 style="font-size: ${baseSize * 2.5}px; font-weight: 800; color: ${textColor}; margin-bottom: 12px;">
                            ${title}
                        </h1>
                        <p style="font-size: ${baseSize * 1.2}px; color: ${textColor}; opacity: 0.7;">
                            ${subtitle}
                        </p>
                    </header>
                    
                    <main style="max-width: 1200px; margin: 0 auto;">
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 24px;">
                            ${chapters.map(chapter => `
                                <div class="chapter-card fade-in" style="background: ${secondaryColor}; border-radius: 16px; padding: 24px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); cursor: pointer; border: 2px solid transparent;">
                                    <div style="font-size: ${baseSize * 3}px; margin-bottom: 16px; text-align: center;">
                                        ${chapter.icon}
                                    </div>
                                    <h2 style="font-size: ${baseSize * 1.4}px; font-weight: 700; color: ${textColor}; margin-bottom: 12px; text-align: center;">
                                        ุงููุตู ${chapter.id}: ${chapter.title}
                                    </h2>
                                    <div style="margin-bottom: 20px;">
                                        ${chapter.topics.map(topic => `
                                            <div style="font-size: ${baseSize * 0.9}px; color: ${textColor}; opacity: 0.7; margin-bottom: 6px; padding-right: 12px; position: relative;">
                                                <span style="position: absolute; right: 0; top: 2px;">โข</span>
                                                ${topic}
                                            </div>
                                        `).join('')}
                                    </div>
                                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 12px;">
                                        <button onclick="startFlashcards(${chapter.id})" style="background: ${primaryColor}; color: white; border: none; border-radius: 8px; padding: 12px; font-size: ${baseSize * 0.9}px; font-weight: 600; cursor: pointer; transition: all 0.2s;">
                                            ๐ด ุงูุจุทุงูุงุช
                                        </button>
                                        <button onclick="startQuiz(${chapter.id})" style="background: ${accentColor}; color: white; border: none; border-radius: 8px; padding: 12px; font-size: ${baseSize * 0.9}px; font-weight: 600; cursor: pointer; transition: all 0.2s;">
                                            ๐ ุงุฎุชุจุงุฑ
                                        </button>
                                    </div>
                                </div>
                            `).join('')}
                        </div>
                    </main>
                </div>
            `;
        }

        function renderFlashcards(config) {
            const baseSize = config.font_size || defaultConfig.font_size;
            const primaryColor = config.primary_color || defaultConfig.primary_color;
            const secondaryColor = config.secondary_color || defaultConfig.secondary_color;
            const textColor = config.text_color || defaultConfig.text_color;
            const accentColor = config.accent_color || defaultConfig.accent_color;
            
            const chapter = chapters.find(ch => ch.id === currentChapter);
            const flashcard = chapter.flashcards[currentFlashcardIndex];
            const progress = ((currentFlashcardIndex + 1) / chapter.flashcards.length) * 100;
            
            return `
                <div class="w-full" style="min-height: 100%; background: linear-gradient(135deg, ${primaryColor}15 0%, ${accentColor}15 100%); padding: 32px 16px;">
                    <div style="max-width: 800px; margin: 0 auto;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 32px;">
                            <button onclick="goHome()" style="background: ${secondaryColor}; color: ${textColor}; border: none; border-radius: 8px; padding: 12px 24px; font-size: ${baseSize}px; font-weight: 600; cursor: pointer; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                โ ุงูุฑุฆูุณูุฉ
                            </button>
                            <div style="text-align: center;">
                                <h2 style="font-size: ${baseSize * 1.8}px; font-weight: 700; color: ${textColor}; margin-bottom: 4px;">
                                    ${chapter.icon} ${chapter.title}
                                </h2>
                                <p style="font-size: ${baseSize * 0.9}px; color: ${textColor}; opacity: 0.7;">
                                    ุงูุจุทุงูุฉ ${currentFlashcardIndex + 1} ูู ${chapter.flashcards.length}
                                </p>
                            </div>
                            <div style="width: 120px;"></div>
                        </div>
                        
                        <div style="background: ${secondaryColor}; border-radius: 8px; height: 8px; margin-bottom: 32px; overflow: hidden;">
                            <div style="background: ${primaryColor}; height: 100%; width: ${progress}%; transition: width 0.3s;"></div>
                        </div>
                        
                        <div class="flashcard fade-in" id="flashcard" onclick="flipCard()" style="height: 400px; margin-bottom: 32px;">
                            <div class="flashcard-inner">
                                <div class="flashcard-front" style="background: ${secondaryColor}; border: 3px solid ${primaryColor};">
                                    <h3 style="font-size: ${baseSize * 1.5}px; font-weight: 600; color: ${textColor}; line-height: 1.6;">
                                        ${flashcard.front}
                                    </h3>
                                </div>
                                <div class="flashcard-back" style="background: ${primaryColor}; color: white;">
                                    <p style="font-size: ${baseSize * 1.3}px; font-weight: 500; line-height: 1.6;">
                                        ${flashcard.back}
                                    </p>
                                </div>
                            </div>
                        </div>
                        
                        <div style="text-align: center; font-size: ${baseSize * 0.9}px; color: ${textColor}; opacity: 0.6; margin-bottom: 24px;">
                            ุงููุฑ ุนูู ุงูุจุทุงูุฉ ูููุจูุง
                        </div>
                        
                        <div style="display: flex; justify-content: center; gap: 16px;">
                            <button onclick="previousCard()" ${currentFlashcardIndex === 0 ? 'disabled' : ''} style="background: ${secondaryColor}; color: ${textColor}; border: 2px solid ${primaryColor}; border-radius: 8px; padding: 14px 32px; font-size: ${baseSize}px; font-weight: 600; cursor: pointer; opacity: ${currentFlashcardIndex === 0 ? '0.5' : '1'};">
                                โ ุงูุณุงุจู
                            </button>
                            <button onclick="nextCard()" ${currentFlashcardIndex === chapter.flashcards.length - 1 ? 'disabled' : ''} style="background: ${primaryColor}; color: white; border: none; border-radius: 8px; padding: 14px 32px; font-size: ${baseSize}px; font-weight: 600; cursor: pointer; opacity: ${currentFlashcardIndex === chapter.flashcards.length - 1 ? '0.5' : '1'};">
                                ุงูุชุงูู โ
                            </button>
                        </div>
                    </div>
                </div>
            `;
        }

        function renderQuiz(config) {
            const baseSize = config.font_size || defaultConfig.font_size;
            const primaryColor = config.primary_color || defaultConfig.primary_color;
            const secondaryColor = config.secondary_color || defaultConfig.secondary_color;
            const textColor = config.text_color || defaultConfig.text_color;
            const accentColor = config.accent_color || defaultConfig.accent_color;
            
            const chapter = chapters.find(ch => ch.id === currentChapter);
            
            if (currentQuizIndex >= chapter.quiz.length) {
                return `
                    <div class="w-full" style="min-height: 100%; background: linear-gradient(135deg, ${primaryColor}15 0%, ${accentColor}15 100%); padding: 32px 16px; display: flex; align-items: center; justify-content: center;">
                        <div class="fade-in" style="background: ${secondaryColor}; border-radius: 16px; padding: 48px; text-align: center; max-width: 500px; box-shadow: 0 8px 16px rgba(0,0,0,0.1);">
                            <div style="font-size: ${baseSize * 4}px; margin-bottom: 24px;">
                                ${quizScore === chapter.quiz.length ? '๐' : '๐'}
                            </div>
                            <h2 style="font-size: ${baseSize * 2}px; font-weight: 700; color: ${textColor}; margin-bottom: 16px;">
                                ุงูุชูู ุงูุงุฎุชุจุงุฑ!
                            </h2>
                            <p style="font-size: ${baseSize * 1.5}px; color: ${textColor}; margin-bottom: 32px;">
                                ุฏุฑุฌุชู: <span style="color: ${primaryColor}; font-weight: 700;">${quizScore}</span> ูู ${chapter.quiz.length}
                            </p>
                            <div style="display: flex; gap: 16px; justify-content: center;">
                                <button onclick="restartQuiz()" style="background: ${primaryColor}; color: white; border: none; border-radius: 8px; padding: 14px 28px; font-size: ${baseSize}px; font-weight: 600; cursor: pointer;">
                                    ุฅุนุงุฏุฉ ุงูุงุฎุชุจุงุฑ
                                </button>
                                <button onclick="goHome()" style="background: ${secondaryColor}; color: ${textColor}; border: 2px solid ${primaryColor}; border-radius: 8px; padding: 14px 28px; font-size: ${baseSize}px; font-weight: 600; cursor: pointer;">
                                    ุงูุฑุฆูุณูุฉ
                                </button>
                            </div>
                        </div>
                    </div>
                `;
            }
            
            const question = chapter.quiz[currentQuizIndex];
            
            return `
                <div class="w-full" style="min-height: 100%; background: linear-gradient(135deg, ${primaryColor}15 0%, ${accentColor}15 100%); padding: 32px 16px;">
                    <div style="max-width: 800px; margin: 0 auto;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 32px;">
                            <button onclick="goHome()" style="background: ${secondaryColor}; color: ${textColor}; border: none; border-radius: 8px; padding: 12px 24px; font-size: ${baseSize}px; font-weight: 600; cursor: pointer; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                                โ ุงูุฑุฆูุณูุฉ
                            </button>
                            <div style="text-align: center;">
                                <h2 style="font-size: ${baseSize * 1.8}px; font-weight: 700; color: ${textColor}; margin-bottom: 4px;">
                                    ${chapter.icon} ${chapter.title}
                                </h2>
                                <p style="font-size: ${baseSize * 0.9}px; color: ${textColor}; opacity: 0.7;">
                                    ุงูุณุคุงู ${currentQuizIndex + 1} ูู ${chapter.quiz.length} โข ุงูููุงุท: ${quizScore}
                                </p>
                            </div>
                            <div style="width: 120px;"></div>
                        </div>
                        
                        <div class="fade-in" style="background: ${secondaryColor}; border-radius: 16px; padding: 40px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); margin-bottom: 32px;">
                            <h3 style="font-size: ${baseSize * 1.6}px; font-weight: 600; color: ${textColor}; margin-bottom: 32px; line-height: 1.6;">
                                ${question.question}
                            </h3>
                            <div style="display: grid; gap: 16px;">
                                ${question.options.map((option, index) => `
                                    <button onclick="checkAnswer(${index})" class="quiz-option" style="background: ${secondaryColor}; color: ${textColor}; border: 2px solid ${primaryColor}30; border-radius: 12px; padding: 20px; font-size: ${baseSize * 1.1}px; font-weight: 500; cursor: pointer; text-align: right; transition: all 0.2s;">
                                        ${option}
                                    </button>
                                `).join('')}
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        function attachEventListeners() {
            // Event listeners are attached via onclick attributes in the HTML
        }

        window.startFlashcards = function(chapterId) {
            currentView = 'flashcards';
            currentChapter = chapterId;
            currentFlashcardIndex = 0;
            render();
        };

        window.startQuiz = function(chapterId) {
            currentView = 'quiz';
            currentChapter = chapterId;
            currentQuizIndex = 0;
            quizScore = 0;
            render();
        };

        window.goHome = function() {
            currentView = 'home';
            currentChapter = null;
            render();
        };

        window.flipCard = function() {
            const card = document.getElementById('flashcard');
            if (card) {
                card.classList.toggle('flipped');
            }
        };

        window.nextCard = function() {
            const chapter = chapters.find(ch => ch.id === currentChapter);
            if (currentFlashcardIndex < chapter.flashcards.length - 1) {
                currentFlashcardIndex++;
                render();
            }
        };

        window.previousCard = function() {
            if (currentFlashcardIndex > 0) {
                currentFlashcardIndex--;
                render();
            }
        };

        window.checkAnswer = function(selectedIndex) {
            const chapter = chapters.find(ch => ch.id === currentChapter);
            const question = chapter.quiz[currentQuizIndex];
            const buttons = document.querySelectorAll('.quiz-option');
            const config = window.elementSdk ? window.elementSdk.config : defaultConfig;
            const primaryColor = config.primary_color || defaultConfig.primary_color;
            
            if (selectedIndex === question.correct) {
                buttons[selectedIndex].classList.add('correct');
                buttons[selectedIndex].style.background = primaryColor;
                buttons[selectedIndex].style.color = 'white';
                buttons[selectedIndex].style.borderColor = primaryColor;
                quizScore++;
            } else {
                buttons[selectedIndex].classList.add('wrong');
                buttons[selectedIndex].style.background = '#ef4444';
                buttons[selectedIndex].style.color = 'white';
                buttons[selectedIndex].style.borderColor = '#ef4444';
                buttons[question.correct].style.background = primaryColor;
                buttons[question.correct].style.color = 'white';
                buttons[question.correct].style.borderColor = primaryColor;
            }
            
            buttons.forEach(btn => btn.disabled = true);
            
            setTimeout(() => {
                currentQuizIndex++;
                render();
            }, 1500);
        };

        window.restartQuiz = function() {
            currentQuizIndex = 0;
            quizScore = 0;
            render();
        };

        const element = {
            defaultConfig,
            onConfigChange,
            mapToCapabilities: (config) => ({
                recolorables: [
                    {
                        get: () => config.primary_color || defaultConfig.primary_color,
                        set: (value) => {
                            config.primary_color = value;
                            if (window.elementSdk) {
                                window.elementSdk.setConfig({ primary_color: value });
                            }
                        }
                    },
                    {
                        get: () => config.secondary_color || defaultConfig.secondary_color,
                        set: (value) => {
                            config.secondary_color = value;
                            if (window.elementSdk) {
                                window.elementSdk.setConfig({ secondary_color: value });
                            }
                        }
                    },
                    {
                        get: () => config.text_color || defaultConfig.text_color,
                        set: (value) => {
                            config.text_color = value;
                            if (window.elementSdk) {
                                window.elementSdk.setConfig({ text_color: value });
                            }
                        }
                    },
                    {
                        get: () => config.accent_color || defaultConfig.accent_color,
                        set: (value) => {
                            config.accent_color = value;
                            if (window.elementSdk) {
                                window.elementSdk.setConfig({ accent_color: value });
                            }
                        }
                    },
                    {
                        get: () => config.surface_color || defaultConfig.surface_color,
                        set: (value) => {
                            config.surface_color = value;
                            if (window.elementSdk) {
                                window.elementSdk.setConfig({ surface_color: value });
                            }
                        }
                    }
                ],
                borderables: [],
                fontEditable: {
                    get: () => config.font_family || defaultConfig.font_family,
                    set: (value) => {
                        config.font_family = value;
                        if (window.elementSdk) {
                            window.elementSdk.setConfig({ font_family: value });
                        }
                    }
                },
                fontSizeable: {
                    get: () => config.font_size || defaultConfig.font_size,
                    set: (value) => {
                        config.font_size = value;
                        if (window.elementSdk) {
                            window.elementSdk.setConfig({ font_size: value });
                        }
                    }
                }
            }),
            mapToEditPanelValues: (config) => new Map([
                ["app_title", config.app_title || defaultConfig.app_title],
                ["app_subtitle", config.app_subtitle || defaultConfig.app_subtitle]
            ])
        };

        if (window.elementSdk) {
            window.elementSdk.init(element);
        } else {
            onConfigChange(defaultConfig);
        }
    </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9b357b82069ced53',t:'MTc2NjYzNTc2MS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
